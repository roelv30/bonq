{"version":3,"sources":["reducers/room-reducer.js","reducers/audio-reducer.js","reducers/video-reducer.js","reducers/index.js","store.js","components/Home.js","containers/HomePage.js","containers/Room.js","index.js"],"names":["initialState","Set","updateRooms","state","action","type","room","setAudio","audio","setVideo","video","reducers","combineReducers","rooms","roomReducer","videoReducer","audioReducer","persistedState","localStorage","getItem","JSON","parse","store","createStore","subscribe","setItem","stringify","getState","Home","props","className","id","itemProp","onSubmit","joinRoom","name","value","roomId","onChange","handleChange","pattern","maxLength","required","autoFocus","title","onClick","setRoom","HomePage","Date","setHours","setState","e","preventDefault","console","log","history","push","target","this","React","Component","contextTypes","router","PropTypes","object","connect","Container","styled","div","StyledVideo","Video","ref","useRef","useEffect","peer","on","stream","current","srcObject","playsInline","autoPlay","videoConstraints","height","window","innerHeight","width","innerWidth","Room","useState","peers","setPeers","muted","setMuteIcon","setVideoIcon","socketRef","userVideo","userAudio","userVideoStream","peersRef","match","params","roomID","io","emit","payload","navigator","mediaDevices","getUserMedia","then","getAudioTracks","getVideoTracks","users","forEach","userID","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","peerID","socketID","incomingSignal","addPeer","destroy","audioEl","document","getElementsByClassName","volume","play","videoObject","getElementById","remove","find","p","src","enabled","xmlns","viewBox","d","fill","el","documentElement","fullscreenEnabled","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","exitFullscreen","requestFullscreen","getTracks","track","stop","map","index","key","ReactDOM","render","exact","path","component"],"mappings":"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","file":"static/js/main.84b400c4.chunk.js","sourcesContent":["const initialState = new Set();\r\nconst updateRooms = (state = initialState, action) => {\r\n  if (action.type === 'ADD_ROOM') {\r\n    //return new Set([...state, action.room]);\r\n    return new Set([state, action.room]);\r\n  }\r\n  return state;\r\n};\r\nexport default updateRooms;\r\n","const setAudio = (state = true, action) => (action.type === 'SET_AUDIO' ? action.audio : state);\r\nexport default setAudio;\r\n","const setVideo = (state = true, action) => (action.type === 'SET_VIDEO' ? action.video : state);\r\nexport default setVideo;\r\n","import { combineReducers } from 'redux';\r\n// Reducers\r\nimport roomReducer from './room-reducer';\r\nimport audioReducer from './audio-reducer';\r\nimport videoReducer from './video-reducer';\r\n// Combine Reducers\r\nconst reducers = combineReducers({\r\n  rooms: roomReducer,\r\n  video: videoReducer,\r\n  audio: audioReducer\r\n});\r\nexport default reducers;\r\n","import { createStore } from 'redux';\nimport reducers from './reducers';\nconst mapStoreToStorage = () =>\n\tlocalStorage.setItem('reduxState', JSON.stringify(store.getState())),\n\tpersistedState = localStorage.getItem('reduxState') ?\n\t\tJSON.parse(localStorage.getItem('reduxState')) :\n\t\t{\n\t\t\trooms: new Set(),\n\t\t\tvideo: true,\n\t\t\taudio: true\n\t\t};\nconst store = createStore(reducers, persistedState);\nstore.subscribe(mapStoreToStorage);\nexport default store;\n","import React from 'react'\nimport { Link } from \"react-router-dom\";\nimport PropTypes from 'prop-types';\n\nconst Home = (props) => {\n\n  return (\n  <div className=\"home\" id=\"home\">\n    <div>\n      <h1 itemProp=\"headline\">Bonq Video Room</h1>\n      <p>Please enter a room name or code</p>\n      <form onSubmit={props.joinRoom}>\n        <input type=\"text\" name=\"room\" value={props.roomId} onChange={props.handleChange}\n               pattern=\"^\\w+$\" maxLength=\"10\" required autoFocus\n               title=\"Room name should only contain letters or numbers.\"/>\n        <button className=\"primary-button\" type=\"submit\">Join</button>\n        <button className=\"primary-button\" onClick={props.setRoom}>Random</button>\n      </form>\n      {/*{props.rooms.length !== 0 && <div>Recently used rooms:</div>}*/}\n      {/*{[...props.rooms].map(room => <Link key={room} className=\"recent-room\" to={'/r/' + room}>{room}</Link>)}*/}\n    </div>\n  </div>\n)};\nHome.propTypes = {\n  handleChange: PropTypes.func.isRequired,\n  joinRoom: PropTypes.func.isRequired,\n  setRoom: PropTypes.func.isRequired,\n  roomId: PropTypes.number.isRequired,\n  rooms: PropTypes.object.isRequired\n};\n\nexport default Home;\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport Home from '../components/Home'\nimport PropTypes from 'prop-types';\n\nimport store from '../store'\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(\"props homepage:\");\n    console.log(props);\n\n  }\n  state = {\n    value: new Date() - new Date().setHours(0, 0, 0, 0)\n\n  };\n  static contextTypes = {\n    router: PropTypes.object\n  };\n  setRoom = () => this.setState({value: new Date() - new Date().setHours(0, 0, 0, 0)})\n  joinRoom = e => {\n\n    e.preventDefault();\n    //this.router.navigate('r/' + this.state.value);\n    //this.context.history.push('r/' + this.state.value);\n\n    //this.context.router.history.push('/EmpDetails');\n    console.log(this.state.value);\n    this.props.history.push('r/' + this.state.value);\n\n    //this.context.router.history.push('r/' + this.state.value);\n   //this.context.router.push('r/' + this.state.value);\n\n  };\n  handleChange = e => this.setState({value: e.target.value});\n\n  render(){\n    return (\n      <Home\n          roomId={this.state.value}\n          handleChange={this.handleChange}\n          joinRoom={this.joinRoom}\n          setRoom={this.setRoom}\n          rooms={this.props.rooms}\n    />\n    );\n  }\n}\n\n\nconst mapStateToProps = store => ({rooms: store.rooms});\nexport default connect(mapStateToProps)(HomePage);\n\n//const mapStateToProps = store => ({rooms: new Set([...store.rooms])});\n","import React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\n\n\nconst Container = styled.div`\n    padding: 20px;\n    display: flex;\n    height: 100vh;\n    width: 90%;\n    margin: auto;\n    flex-wrap: wrap;\n`;\n\nconst StyledVideo = styled.video`\n    height: 40%;\n    width: 50%;\n`;\n\nconst Video = (props) => {\n    const ref = useRef();\n\n    useEffect(() => {\n        props.peer.on(\"stream\", stream => {\n            ref.current.srcObject = stream;\n        })\n    }, []);\n\n    return (\n        <StyledVideo playsInline autoPlay ref={ref} />\n    );\n}\n\n\nconst videoConstraints = {\n    height: window.innerHeight / 2,\n    width: window.innerWidth / 2\n};\n\n\n\nconst Room = (props) => {\n\n    const [peers, setPeers] = useState([]);\n    const [muted, setMuteIcon] = useState(\"audio-button-true\");\n    const [video, setVideoIcon] = useState(\"video-button-true\");\n\n    const socketRef = useRef();\n    const userVideo = useRef();\n    var userAudio = useRef();\n    var userVideoStream = useRef();\n\n    const peersRef = useRef([]);\n    const roomID = props.match.params.roomID;\n\n\n\n    useEffect(() => {\n\n        socketRef.current = io.connect();\n        console.log(\"emitting room\");\n        socketRef.current.emit(\"join room\");\n\n        socketRef.current.on(\"joinedRoom\", payload => {\n            console.log(\"joined room:\");\n            console.log(payload);\n\n        });\n\n\n        navigator.mediaDevices.getUserMedia({ video: videoConstraints, audio: true }).then(stream => {\n            userVideo.current.srcObject = stream;\n            userAudio.current =  stream.getAudioTracks();\n            userVideoStream.current = stream.getVideoTracks();\n\n\n            socketRef.current.on(\"all users\", users => {\n                //console.log(socketRef.current.id);\n                const peers = [];\n                users.forEach(userID => {\n\n                    const peer = createPeer(userID, socketRef.current.id, stream);\n                    peersRef.current.push({\n                        peerID: userID,\n                        peer,\n                        socketID: socketRef.current.id,\n\n                    })\n                    peers.push(peer);\n                })\n                setPeers(peers);\n            })\n\n            socketRef.current.on(\"user joined\", payload => {\n                const peer = addPeer(payload.signal, payload.callerID, stream);\n                peersRef.current.push({\n                    peerID: payload.callerID,\n                    peer,\n                    socketID: socketRef.current.id,\n\n                })\n\n                setPeers(users => [...users, peer]);\n            });\n\n            socketRef.current.on(\"user left\", peer => {\n\n                peer.destroy();\n\n            });\n\n            socketRef.current.on(\"left\", payload => {\n\n                const audioEl = document.getElementsByClassName(\"audio-element\")[1]\n                audioEl.volume = 0.2;\n                audioEl.play();\n\n                var videoObject = document.getElementById(payload);\n                if(videoObject === null){\n                    console.log(\"object is null\");\n                    props.history.push('/');\n                }else{\n                    videoObject.remove();\n                }\n\n            });\n\n\n\n\n\n            socketRef.current.on(\"receiving returned signal\", payload => {\n                const item = peersRef.current.find(p => p.peerID === payload.id);\n                item.peer.signal(payload.signal);\n            });\n        })\n    }, []);\n\n    function createPeer(userToSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: true,\n            trickle: false,\n            stream,\n        });\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"sending signal\", { userToSignal, callerID, signal })\n        })\n\n        return peer;\n    }\n\n    function addPeer(incomingSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: false,\n            trickle: false,\n            stream,\n        })\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"returning signal\", { signal, callerID })\n        })\n\n        peer.signal(incomingSignal);\n\n        return peer;\n    }\n\n\n\n\n\n\n    const muteSelf = () => {\n\n\n        if(muted === \"audio-button-true\"){\n            setMuteIcon(\"audio-button-false\");\n            userAudio.current[0].enabled = false;\n        }else{\n            setMuteIcon(\"audio-button-true\");\n            userAudio.current[0].enabled = true;\n        }\n\n    }\n    const disableVideo = () => {\n\n        if(video === \"video-button-true\"){\n            setVideoIcon(\"video-button-false\");\n            userVideoStream.current[0].enabled = false;\n        }else{\n            setVideoIcon(\"video-button-true\");\n            userVideoStream.current[0].enabled = true;\n\n        }\n\n    }\n\n    const ToggleFullScreen = () => {\n        const el = document.documentElement;\n         // full-screen available?\n        if (document.fullscreenEnabled) {\n            // are we full-screen?\n            document.fullscreenElement ||\n            document.webkitFullscreenElement ||\n            document.mozFullScreenElement ||\n            document.msFullscreenElement ? document.exitFullscreen() : el.requestFullscreen();\n        }\n    };\n\n\n\n\n\n\n    const hangup = () => {\n\n\n        //userVideo.current.srcObject.stop();\n\n\n\n        // socketRef.current.on(\"leaving id\", payload => {\n        //\n        // });\n\n\n\n        // socketRef.current.on(\"leaving id\");\n\n        //this.socket.emit('leave');\n\n        userVideo.current.srcObject.getTracks().forEach(track => track.stop());\n        //props.history.push('/');\n        socketRef.current.emit(\"leaving\")\n\n        console.log(props);\n       // disconnect\n      //  navigator.mediaDevices.hangup();\n        //\n    };\n\n\n\n\n    return (\n        <Container>\n            <audio className=\"audio-element\">\n                <source src=\"https://freesound.org/data/previews/253/253886_3169537-lq.mp3\"></source>\n            </audio>\n            <div className=\"auth\">\n\n                <div className=\"media-controls\">\n            <button onClick={muteSelf} className={muted} >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n                    <path className=\"on\" d=\"M38 22h-3.4c0 1.49-.31 2.87-.87 4.1l2.46 2.46C37.33 26.61 38 24.38 38 22zm-8.03.33c0-.11.03-.22.03-.33V10c0-3.32-2.69-6-6-6s-6 2.68-6 6v.37l11.97 11.96zM8.55 6L6 8.55l12.02 12.02v1.44c0 3.31 2.67 6 5.98 6 .45 0 .88-.06 1.3-.15l3.32 3.32c-1.43.66-3 1.03-4.62 1.03-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c1.81-.27 3.53-.9 5.08-1.81L39.45 42 42 39.46 8.55 6z\" fill=\"white\"></path>\n                    <path className=\"off\" d=\"M24 28c3.31 0 5.98-2.69 5.98-6L30 10c0-3.32-2.68-6-6-6-3.31 0-6 2.68-6 6v12c0 3.31 2.69 6 6 6zm10.6-6c0 6-5.07 10.2-10.6 10.2-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c6.56-.97 12-6.61 12-13.44h-3.4z\" fill=\"white\"></path>\n                </svg>\n            </button>\n            <button onClick={disableVideo} className={video}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n                    <path className=\"on\" d=\"M40 8H15.64l8 8H28v4.36l1.13 1.13L36 16v12.36l7.97 7.97L44 36V12c0-2.21-1.79-4-4-4zM4.55 2L2 4.55l4.01 4.01C4.81 9.24 4 10.52 4 12v24c0 2.21 1.79 4 4 4h29.45l4 4L44 41.46 4.55 2zM12 16h1.45L28 30.55V32H12V16z\" fill=\"white\"></path>\n                    <path className=\"off\" d=\"M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm-4 24l-8-6.4V32H12V16h16v6.4l8-6.4v16z\" fill=\"white\"></path>\n                </svg>\n            </button>\n                    <button onClick={ToggleFullScreen} className=\"fullscreen-button\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n                            <path className=\"on\" d=\"M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z\" fill=\"white\"></path>\n                            <path className=\"off\" d=\"M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z\" fill=\"white\"></path>\n                        </svg>\n                    </button>\n\n\n\n                        <button onClick={hangup} className=\"hangup-button\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 50 50\" className=\"svg\">\n                                <path d=\"M24 18c-3.21 0-6.3.5-9.2 1.44v6.21c0 .79-.46 1.47-1.12 1.8-1.95.98-3.74 2.23-5.33 3.7-.36.35-.85.57-1.4.57-.55 0-1.05-.22-1.41-.59L.59 26.18c-.37-.37-.59-.87-.59-1.42 0-.55.22-1.05.59-1.42C6.68 17.55 14.93 14 24 14s17.32 3.55 23.41 9.34c.37.36.59.87.59 1.42 0 .55-.22 1.05-.59 1.41l-4.95 4.95c-.36.36-.86.59-1.41.59-.54 0-1.04-.22-1.4-.57-1.59-1.47-3.38-2.72-5.33-3.7-.66-.33-1.12-1.01-1.12-1.8v-6.21C30.3 18.5 27.21 18 24 18z\" fill=\"white\"></path>\n                            </svg>\n                        </button>\n\n                </div>\n            </div>\n\n            <div id={\"test\"}>\n\n\n            <StyledVideo muted ref={userVideo} autoPlay playsInline />\n\n            {peers.map((peer,  index) => {\n                console.log(\"peers\");\n                console.log(peersRef.current[index].peerID);\n                return (\n                    <div id={peersRef.current[index].peerID}>\n                        <Video key={index} peer={peer} socketID={peer.socketID} />\n                    </div>\n                );\n            })}\n            </div>\n\n        </Container>\n    );\n};\n\nexport default Room;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport store from './store';\nimport { Router, Route, useHistory, BrowserRouter  } from \"react-router-dom\";\nimport Home from './containers/HomePage'\nimport Room from './containers/Room'\nimport NotFound from './components/NotFound'\nimport styles from './style.css'\nimport io from \"socket.io-client\";\n\n//\n// const history = useHistory();\n// const goHome = () => {\n//     history.push(\"/home\");\n// };\n\nlet socketRef = io.connect(\"http://localhost:3001\");\n\nsocketRef.on(\"leaving user homepage\", () => {\n    const audioEl = document.getElementsByClassName(\"audio-element\")[0]\n    audioEl.volume = 0.1;\n    audioEl.play();\n});\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <audio className=\"audio-element\">\n                <source src=\"https://freesound.org/data/previews/131/131657_2398403-lq.mp3\"></source>\n            </audio>\n            <Route exact  path=\"/\" component={Home}  />\n            {/*<Route path=\"/r/:room\" component={Room} />*/}\n            <Route path=\"/r/:roomID\" component={Room} />\n            {/*<Route path=\"*\" component={NotFound} />*/}\n        </BrowserRouter>\n    </Provider>,\n    document.getElementById('app')\n);\n//serviceWorker.unregister();\n"],"sourceRoot":""}